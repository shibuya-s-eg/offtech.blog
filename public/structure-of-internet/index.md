# インターネットの構造を完全に理解する


<!--
Todo:
- TLDR

-->


こんにちは、しぶやです。
今回はインターネットの構造を完全に理解していきます。


## TL;DR

*
*
*


## 1　はじめに
### 1.1　インターネットとは何か

いきなりですが、インターネットとは段でしょうか？
今や小学生でも通じる単語ですが、改めて聞かれると困りますね。
[JPNIC](https://www.nic.ad.jp/ja/)には[下記](https://www.nic.ad.jp/ja/basics/beginners/internet.html)のように定義しています。
> まずはインターネットとは何かをはっきりさせましょう。 もともとinterとは中間とか間、相互といった意味を持ちます。
> internationalなら国際ですし、intercessionなら仲介です。 ですから、語源的にはネットワークとネットワークをつなぐものが、 すなわちインターネットです。
> 英語だと、小文字で始まるinternetがこれに相当して、 LANとLANをつないだもの、 というイメージになります。
>
> 対して日本でインターネット、 英語では大文字で始まるThe Internetのほうは、 もっと限定的です。
> これはIPという約束に従って接続された、 世界規模のコンピュータネットワークを意味します。

インターネットとは**IPという約束に従って接続された、 世界規模のコンピュータネットワーク**であるようです。


### 1.2　非中央集権型/分散型ネットワーク

1.1節に続いて、インターネットは誰によっって管理されているのでしょうか。
こちらもJPNIC先生に教えてもらいましょう。

> インターネットはだれが運営しているのでしょうか。 実は、特定の団体が運営しているわけではないのです。
> 強いてあげれば、 ICANN (The Internet Corporation for Assinged Names and Numbers)と IETF (The Internet Engineering Task Force)でしょうか。
>
> 資源管理の観点で言うと、 長らく南カリフォルニア大学情報科学研究所(ISI)がアメリカ政府からの委託を受けIPアドレスとドメイン名を管理しており、 後にそのプロジェクトをIANA(Internet Assigned Numbers Authority)と呼ぶようになりました。
> ドメイン名の登録業務に関しては、 アメリカ政府からスタンフォード研究所(SRI)に委託されていましたが、 その後ネットワーク・ソリューションズ社に移管されました。
> こうした背景のもと、 アメリカでは1993年にゴア副大統領(当時)が情報ハイウェイ構想を発表し、 急速にインターネットが普及し始めました。
> 5年後の1998年、 IANAが担ってきた機能に関する権限をアメリカ政府から移行する目的で組織されたのがICANNです。
> その設立には、アメリカ政府の発表したグリーンペーパー、 ホワイトペーパーが強く影響しています。
> 現在ではIPアドレス、ドメイン名、 プロトコル、 ポート番号はICANNが管理しています。
> しかし歴史的経緯から、 いまだにその機能のことを差してIANAと呼んでいます。
>
> ICANNが資源管理を担う一方、 技術面での責を担うのがIETFです。
> ここでは、 RFC (Request For Comments)と呼ばれる、 一連の技術文書を発行しています。
> これは独占的なものではなく、誰でも自由に使えます。
> それどころか正式なRFCとして採用されるためには、 素案の段階で独立した複数の開発が行われて、 相互に運用可能であることが確認されなければならないくらいです。
>
> 特筆すべきは、 ICANN、 IETFともに非常に開かれた組織で、 原則として誰でも参加できるという点でしょう。

重要なのは**特定の団体が運営しているわけではない**という部分です。
管理簿に登録する人や技術的なルールを定める人はいても、中央集権的にだれかが管理しているわけではないのです。
これにより、企業のネットワークや大学、ISPなどが独立して介入することが可能になります。

また、中央集権型でない分散システムであるため、どこかで障害が起きても別経路でネットワークをつなげることが可能です。
これが分散型ネットワークです。


## 2　物理層：インターネットの土台

本章では、インターネットの物理的な接続について学習していきます。
この手の説明では、いきなり光ファイバーケーブルとか言われ、いまいちイメージが沸かないことが多々あります。
よって、本章では、よりイメージのが湧きやすいように、「自宅のスマホやPCからどのように外の世界と通信しているか」という流れで説明していきます。

### 2.1　端末 - ルータ/スイッチ間

インターネットへアクセスする場合、読者のみなさんは何を利用するでしょうか？
たいていの場合、スマホやパソコンだと思います。
そしてそれらの接続先は自宅のWifiルータとかでしょうか。
今どきスマート家電も進み、様々なものにインターネットにつなげているでしょう。

スマホ/PCからWifiにはどのようにつながっているでしょうか？
皆さんご存知の通り、接続方法には無線か有線があります。
無線の場合は、電波でつながっています。
もう少し丁寧に説明すると、（ほとんどの場合は、）IEEE 802.1に従い、特定の周波数帯を利用したデータのやりとりを行っています。
有線の場合は[LANケーブル](https://ja.wikipedia.org/wiki/%E3%82%AB%E3%83%86%E3%82%B4%E3%83%AA%E3%83%BC6%E3%82%B1%E3%83%BC%E3%83%96%E3%83%AB)と呼ばれるケーブルで直接接続します。
有線LANのIEEEの規格はというと、IEEE 802.3で定められています。

{{< admonition tip "無線LANの周波数帯" >}}
読者のみなさんは自宅のWifiルータに接続する際、5GHzと2.4GHzの2つを見たことはないでしょうか？
Wifiではこの2つの周波数帯を利用しています。（Wi-Fi 6以降は6GHzも利用されているようです。）

この2つの周波数帯の違いは下記です。
|   特徴  |  2.4GHz         |     5GHz                |
|-----------------|-----------------|--------------------------|
|   通信速度          |    遅い         |    速い            |
|   障害物の強さ          |    壁や床を通りやすい      |    壁や床を通りにくい  |
|   干渉しやすさ         |    鑑賞しやすい  |     干渉しにくい  |

物理の話になってしまうので詳しく説明はしませんが、Wi-Fiルータまでの間に壁や床などの障害物がなければ5GHzを使ったほうが通信速度も早く、他の電波を発している家電などの影響も受けにくいです。
一方で、5GHzは障害物に弱いので、障害物が間にある場合は2.4の利用も考えたほうが良いかもしれません。

{{< /admonition >}}

### 2.2　ルータ - モデム/ONU

このあたりから人によっては意識したことがない世界かと思います。
（一人暮らしとからならあるかな？）





### 2.1　光ファイバーと海底ケーブル


### 2.2　電柱・マンホールとダークファイバー


### 2.3　ISPまでのアクセスライン（FTTH/DSL/5Gなど）




## 4　ネットワーク層：IPとルーティングの世界
### 4.1　IPアドレスとサブネット
### 4.2　ルーティングとは何か
### 4.3　経路制御の仕組み：BGPとOSPFの役割
### 4.4　パケットの流れを追う

## 5　AS（自律システム）とインターネットの構造
### 5.1　ASとは何か：管理単位としての意味
### 5.2　グローバルなASの分布
### 5.3　AS間の接続とBGPポリシー
### 5.4　Tier構造（Tier 1/Tier 2など）

## 6　インターネットエクスチェンジ（IX/IE）
### 6.1　IXとは何か
### 6.2　ピアリングとトランジットの違い
### 6.3　代表的なIX（JPNAP、JPIXなど）
### 6.4　IXの内部構造と運用

## 7　プロトコルと通信の流れ
### 7.1　TCP/IPモデルとOSIモデル
### 7.2　DNSと名前解決の仕組み
### 7.3　HTTPとTLSの役割
### 7.4　トレーサウト・pingで見る実際の流れ

## 8　障害とその影響
### 8.1　海底ケーブル断線時の影響
### 8.2　BGPハイジャックとセキュリティ
### 8.3　DDoS攻撃のトラフィック構造
### 8.4　冗長構成と自律回復性

## 9　今後のインターネット
### 9.1　IPv6移行の進捗と課題
### 9.2　量子通信・衛星インターネットの可能性
### 9.3　地域格差とインフラ整備
### 9.4　政府とインターネット管理（ICANN/RIR/NIC）

## 10　まとめと参考資料
### 10.1


## 参考

[1] []()

